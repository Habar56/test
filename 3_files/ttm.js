(function(){(function(){function q(d,g,m){return g in d?Object.defineProperty(d,g,{value:m,enumerable:!0,configurable:!0,writable:!0}):d[g]=m,d}function J(d){for(var g=1;g<arguments.length;g++){var m=arguments[g]!=null?arguments[g]:{},p=Object.keys(m);typeof Object.getOwnPropertySymbols=="function"&&(p=p.concat(Object.getOwnPropertySymbols(m).filter(function(l){return Object.getOwnPropertyDescriptor(m,l).enumerable}))),p.forEach(function(l){q(d,l,m[l])})}return d}window._ttm.bundles||(window._ttm.bundles=[]),window._ttm.bundles.push({runtimes:{tags:{myTarget:function(d,g,m){try{var p=d.myTarget_event,l=d.myTarget_id,w="tmr-code",v="_ttm",E="mtStorage",I="mtCountersInit";window._tmr=window._tmr||[];var S=function(){if(!document.getElementById(w)){var N=document.createElement("script");N.type="text/javascript",N.async=!0,N.id=w,N.src="https://www.cdn-tinkoff.ru/twa/hosted-libs/top-mail/v1/code.js";var D=function(){if(!document.getElementById(w)){var k=document.getElementsByTagName("script")[0];k.parentNode.insertBefore(N,k)}};window.opera==="[object Opera]"&&document.readyState==="loading"?document.addEventListener("DOMContentLoaded",D,!1):D()}},h=function(){window[v][E]||(window[v][E]=q({},I,{})),window[v][E][I][l]||(window[v][E][I][l]=!0,window._tmr.push({id:l,type:"pageView",start:new Date().getTime()}))};S(),h(),window._tmr.push({id:l,type:"reachGoal",goal:p})}catch(N){return _ttm.$.logger.error(N),!1}},adriver:function(d,g,m){try{var p,l,w,v,E,I,S,h,N,D=d.adriver_event,k=d.adriver_id,T=function(){var A,C;if(((A=window.tracking)===null||A===void 0||(C=A.state)===null||C===void 0?void 0:C.url)&&typeof window.tracking.state.url=="object"){var B=window.tracking.state.url,P=B.protocol,st=B.hostname,ut=B.pathname;return"".concat(P,"//").concat(st).concat(ut)}return""},O=function(A){var C,B,P;return((C=window.tracking)===null||C===void 0||(B=C.state)===null||B===void 0||(P=B.utmMarkers)===null||P===void 0?void 0:P[A])||""},ot=function(A){var C=document.cookie.split(";").find(function(B){return B.trim().startsWith("".concat(A,"="))});return C?C.slice("".concat(A,"=").length+1):""},it=((p=window.tracking)===null||p===void 0||(l=p.state)===null||l===void 0?void 0:l.wuid)||"",K=((w=window.tracking)===null||w===void 0||(v=w.state)===null||v===void 0?void 0:v.hid)||"",Z=((E=window.tracking)===null||E===void 0||(I=E.state)===null||I===void 0||(S=I.url)===null||S===void 0||(h=S.query)===null||h===void 0?void 0:h.adrclid)||"",tt=T(),G={utm_source:O("utm_source"),utm_medium:O("utm_medium"),utm_campaign:O("utm_campaign"),utm_term:O("utm_term"),utm_content:O("utm_content"),adrclid:Z},et="?",z=tt;for(var Q in G)G[Q]!==""&&(z="".concat(z+et+Q,"=").concat(G[Q]),et="&");var W=J({sid:k,bt:62,sz:D,suid:it,loc:tt,tail256:z,fsid:Z,yid1:ot("_ym_uid"),rnd:Date.now()},K?{custom:"1:".concat(K)}:{});(N=window.tracking)===null||N===void 0||N.addPixel({url:"https://ad.adriver.ru/cgi-bin/rle.cgi",params:W})}catch(A){return _ttm.$.logger.error(A),!1}}},filters:{productCategory:function(d){try{return window.tracking.state.productCategory===d.productCategory}catch(g){return _ttm.$.logger.error(g),!1}},productName:function(d){try{return window.tracking.state.productName===d.productName}catch(g){return _ttm.$.logger.error(g),!1}}},triggers:{eventeaEvent:function(d,g){try{_ttm.$.addSpecialEventListener(d.eventea_eventeaEvent,function(m){g(m)})}catch(m){return _ttm.$.logger.error(m),!1}}},variables:{javascriptVariable:function(d,g){try{var m=d.javascriptVariable_path.split("."),p=window,l=!0,w=!1,v=void 0;try{for(var E=m[Symbol.iterator](),I;!(l=(I=E.next()).done);l=!0){var S=I.value;p=p==null?void 0:p[S]}}catch(h){w=!0,v=h}finally{try{!l&&E.return!=null&&E.return()}finally{if(w)throw v}}return p}catch(h){return _ttm.$.logger.error(h),!1}}}},tags:[{type:"myTarget",filterIds:["155","170"],triggerIds:["109"],content:{NAME:"Business Education / Course Cafe / bs_CourseSignup / \u0412\u041A\u0420",ENABLED:!0,myTarget_id:"2611223",myTarget_event:"tsecrets_course_cafe_submit"},conditions:[]},{type:"myTarget",filterIds:["155","170"],triggerIds:["115"],content:{NAME:"Business Education / Course Cafe / pageLoad / \u0412\u041A\u0420",ENABLED:!0,myTarget_id:"2611223",myTarget_event:"tsecrets_course_cafe_view"},conditions:[]},{type:"myTarget",filterIds:["155"],triggerIds:["115"],content:{NAME:"Business Education / Courses / pageLoad / \u0412\u041A\u0420",ENABLED:!0,myTarget_id:"2611223",myTarget_event:"tsecrets_courses_view"},conditions:[{type:"AND",conditions:[[{variableId:101,operation:"STARTS_WITH",value:"Course"},{variableId:101,operation:"EQUALS",value:"All Courses"}]]}]},{type:"myTarget",filterIds:["155"],triggerIds:["109"],content:{NAME:"Business Education / Courses / bs_CourseSignup / \u0412\u041A\u0420",ENABLED:!0,myTarget_id:"2611223",myTarget_event:"tsecrets_courses_submit"},conditions:[{type:"AND",conditions:[[{variableId:101,operation:"STARTS_WITH",value:"Course"},{variableId:101,operation:"EQUALS",value:"All Courses"}]]}]},{type:"myTarget",filterIds:["155","156"],triggerIds:["115"],content:{NAME:"Business Education / Course WB / pageLoad / \u0412\u041A\u0420",ENABLED:!0,myTarget_id:"2611223",myTarget_event:"tsecrets_course_wb_view"},conditions:[]},{type:"myTarget",filterIds:["155","156"],triggerIds:["109"],content:{NAME:"Business Education / Course WB / bs_CourseSignup / \u0412\u041A\u0420",ENABLED:!0,myTarget_id:"2611223",myTarget_event:"tsecrets_course_wb_submit"},conditions:[]},{type:"myTarget",filterIds:["155","157"],triggerIds:["115"],content:{NAME:"Business Education / Course Ozon / pageLoad / \u0412\u041A\u0420",ENABLED:!0,myTarget_id:"2611223",myTarget_event:"tsecrets_course_ozon_view"},conditions:[]},{type:"myTarget",filterIds:["155","157"],triggerIds:["109"],content:{NAME:"Business Education / Course Ozon / bs_CourseSignup / \u0412\u041A\u0420",ENABLED:!0,myTarget_id:"2611223",myTarget_event:"tsecrets_course_ozon_submit"},conditions:[]},{type:"myTarget",filterIds:["155","158"],triggerIds:["115"],content:{NAME:"Business Education / Course YM / pageLoad / \u0412\u041A\u0420",ENABLED:!0,myTarget_id:"2611223",myTarget_event:"tsecrets_course_ym_view"},conditions:[]},{type:"myTarget",filterIds:["155","158"],triggerIds:["109"],content:{NAME:"Business Education / Course YM / bs_CourseSignup / \u0412\u041A\u0420",ENABLED:!0,myTarget_id:"2611223",myTarget_event:"tsecrets_course_ym_submit"},conditions:[]},{type:"myTarget",filterIds:["155","159"],triggerIds:["115"],content:{NAME:"Business Education / Course IP / pageLoad / \u0412\u041A\u0420",ENABLED:!0,myTarget_id:"2611223",myTarget_event:"tsecrets_course_ip_view"},conditions:[]},{type:"myTarget",filterIds:["155","159"],triggerIds:["109"],content:{NAME:"Business Education / Course IP / bs_CourseSignup / \u0412\u041A\u0420",ENABLED:!0,myTarget_id:"2611223",myTarget_event:"tsecrets_course_ip_submit"},conditions:[]},{type:"myTarget",filterIds:["155","160"],triggerIds:["115"],content:{NAME:"Business Education / Course Business / pageLoad / \u0412\u041A\u0420",ENABLED:!0,myTarget_id:"2611223",myTarget_event:"tsecrets_course_business_view"},conditions:[]},{type:"myTarget",filterIds:["155","160"],triggerIds:["109"],content:{NAME:"Business Education / Course Business / bs_CourseSignup / \u0412\u041A\u0420",ENABLED:!0,myTarget_id:"2611223",myTarget_event:"tsecrets_course_business_submit"},conditions:[]},{type:"myTarget",filterIds:["155","161"],triggerIds:["115"],content:{NAME:"Business Education / Course Texts / pageLoad / \u0412\u041A\u0420",ENABLED:!0,myTarget_id:"2611223",myTarget_event:"tsecrets_course_texts_view"},conditions:[]},{type:"myTarget",filterIds:["155","161"],triggerIds:["109"],content:{NAME:"Business Education / Course Texts / bs_CourseSignup / \u0412\u041A\u0420",ENABLED:!0,myTarget_id:"2611223",myTarget_event:"tsecrets_course_texts_submit"},conditions:[]},{type:"myTarget",filterIds:["155","162"],triggerIds:["115"],content:{NAME:"Business Education / Course Special Account / pageLoad / \u0412\u041A\u0420",ENABLED:!0,myTarget_id:"2611223",myTarget_event:"tsecrets_course_b2g_view"},conditions:[]},{type:"myTarget",filterIds:["155","162"],triggerIds:["109"],content:{NAME:"Business Education / Course Special Account / bs_CourseSignup / \u0412\u041A\u0420",ENABLED:!0,myTarget_id:"2611223",myTarget_event:"tsecrets_course_b2g_submit"},conditions:[]},{type:"myTarget",filterIds:["155","163"],triggerIds:["115"],content:{NAME:"Business Education / Course Franchise / pageLoad / \u0412\u041A\u0420",ENABLED:!0,myTarget_id:"2611223",myTarget_event:"tsecrets_course_franchise_view"},conditions:[]},{type:"myTarget",filterIds:["155","163"],triggerIds:["109"],content:{NAME:"Business Education / Course Franchise / bs_CourseSignup / \u0412\u041A\u0420",ENABLED:!0,myTarget_id:"2611223",myTarget_event:"tsecrets_course_franchise_submit"},conditions:[]},{type:"myTarget",filterIds:["155","164"],triggerIds:["115"],content:{NAME:"Business Education / Course Excel / pageLoad / \u0412\u041A\u0420",ENABLED:!0,myTarget_id:"2611223",myTarget_event:"tsecrets_course_excel_view"},conditions:[]},{type:"myTarget",filterIds:["155","164"],triggerIds:["109"],content:{NAME:"Business Education / Course Excel / bs_CourseSignup / \u0412\u041A\u0420",ENABLED:!0,myTarget_id:"2611223",myTarget_event:"tsecrets_course_excel_submit"},conditions:[]},{type:"myTarget",filterIds:["155","165"],triggerIds:["115"],content:{NAME:"Business Education / Course Sale / pageLoad / \u0412\u041A\u0420",ENABLED:!0,myTarget_id:"2611223",myTarget_event:"tsecrets_course_sale_view"},conditions:[]},{type:"myTarget",filterIds:["155","165"],triggerIds:["109"],content:{NAME:"Business Education / Course Sale / bs_CourseSignup / \u0412\u041A\u0420",ENABLED:!0,myTarget_id:"2611223",myTarget_event:"tsecrets_course_sale_submit"},conditions:[]},{type:"myTarget",filterIds:["155","166"],triggerIds:["115"],content:{NAME:"Business Education / Course Investment / pageLoad / \u0412\u041A\u0420",ENABLED:!0,myTarget_id:"2611223",myTarget_event:"tsecrets_course_investment_view"},conditions:[]},{type:"myTarget",filterIds:["155","166"],triggerIds:["109"],content:{NAME:"Business Education / Course Investment / bs_CourseSignup / \u0412\u041A\u0420",ENABLED:!0,myTarget_id:"2611223",myTarget_event:"tsecrets_course_investment_submit"},conditions:[]},{type:"myTarget",filterIds:["155","167"],triggerIds:["115"],content:{NAME:"Business Education / Course Financial Awareness / pageLoad / \u0412\u041A\u0420",ENABLED:!0,myTarget_id:"2611223",myTarget_event:"tsecrets_course_finance_view"},conditions:[]},{type:"myTarget",filterIds:["155","167"],triggerIds:["109"],content:{NAME:"Business Education / Course Financial Awareness / bs_CourseSignup / \u0412\u041A\u0420",ENABLED:!0,myTarget_id:"2611223",myTarget_event:"tsecrets_course_finance_submit"},conditions:[]},{type:"myTarget",filterIds:["155","168"],triggerIds:["115"],content:{NAME:"Business Education / Course Marketing / pageLoad / \u0412\u041A\u0420",ENABLED:!0,myTarget_id:"2611223",myTarget_event:"tsecrets_course_marketing_view"},conditions:[]},{type:"myTarget",filterIds:["155","168"],triggerIds:["109"],content:{NAME:"Business Education / Course Marketing / bs_CourseSignup / \u0412\u041A\u0420",ENABLED:!0,myTarget_id:"2611223",myTarget_event:"tsecrets_course_marketing_submit"},conditions:[]},{type:"myTarget",filterIds:["155","169"],triggerIds:["115"],content:{NAME:"Business Education / Course Accountant / pageLoad / \u0412\u041A\u0420",ENABLED:!0,myTarget_id:"2611223",myTarget_event:"tsecrets_course_accountant_view"},conditions:[]},{type:"myTarget",filterIds:["155","169"],triggerIds:["109"],content:{NAME:"Business Education / Course Accountant / bs_CourseSignup / \u0412\u041A\u0420",ENABLED:!0,myTarget_id:"2611223",myTarget_event:"tsecrets_course_accountant_submit"},conditions:[]},{type:"myTarget",filterIds:["155","171"],triggerIds:["115"],content:{NAME:"Business Education / Course State Support / pageLoad / \u0412\u041A\u0420",ENABLED:!0,myTarget_id:"2611223",myTarget_event:"tsecrets_course_state-support_view"},conditions:[]},{type:"myTarget",filterIds:["155","171"],triggerIds:["109"],content:{NAME:"Business Education / Course State Support / bs_CourseSignup / \u0412\u041A\u0420",ENABLED:!0,myTarget_id:"2611223",myTarget_event:"tsecrets_course_state-support_submit"},conditions:[]},{type:"myTarget",filterIds:["155","172"],triggerIds:["115"],content:{NAME:"Business Education / Course Fashion Store / pageLoad / \u0412\u041A\u0420",ENABLED:!0,myTarget_id:"2611223",myTarget_event:"tsecrets_course_fashion-store_view"},conditions:[]},{type:"myTarget",filterIds:["155","172"],triggerIds:["109"],content:{NAME:"Business Education / Course Fashion Store / bs_CourseSignup / \u0412\u041A\u0420",ENABLED:!0,myTarget_id:"2611223",myTarget_event:"tsecrets_course_fashion-store_submit"},conditions:[]},{type:"adriver",filterIds:["155"],triggerIds:["116"],content:{NAME:"Business Education / emailSubmit / Adriver",ENABLED:!0,adriver_id:"223961",adriver_event:"business_education_emailsubmit"},conditions:[]},{type:"adriver",filterIds:["155"],triggerIds:["115"],content:{NAME:"Business Education / pageLoad / Adriver",ENABLED:!0,adriver_id:"223961",adriver_event:"business_education_pageload"},conditions:[]}],filters:{155:{type:"productCategory",content:{NAME:"Business Education",productCategory:"Business Education"},conditions:[]},156:{type:"productName",content:{NAME:"Business Education / Course WB",productName:"Course WB",productName_productCategory:"Business Education"},conditions:[]},157:{type:"productName",content:{NAME:"Business Education / Course Ozon",productName:"Course Ozon",productName_productCategory:"Business Education"},conditions:[]},158:{type:"productName",content:{NAME:"Business Education / Course YM",productName:"Course YM",productName_productCategory:"Business Education"},conditions:[]},159:{type:"productName",content:{NAME:"Business Education / Course IP",productName:"Course IP",productName_productCategory:"Business Education"},conditions:[]},160:{type:"productName",content:{NAME:"Business Education / Course Business",productName:"Course Business",productName_productCategory:"Business Education"},conditions:[]},161:{type:"productName",content:{NAME:"Business Education / Course Texts",productName:"Course Texts",productName_productCategory:"Business Education"},conditions:[]},162:{type:"productName",content:{NAME:"Business Education / Course Special Account",productName:"Course Special Account",productName_productCategory:"Business Education"},conditions:[]},163:{type:"productName",content:{NAME:"Business Education / Course Franchise",productName:"Course Franchise",productName_productCategory:"Business Education"},conditions:[]},164:{type:"productName",content:{NAME:"Business Education / Course Excel",productName:"Course Excel",productName_productCategory:"Business Education"},conditions:[]},165:{type:"productName",content:{NAME:"Business Education / Course Sale",productName:"Course Sale",productName_productCategory:"Business Education"},conditions:[]},166:{type:"productName",content:{NAME:"Business Education / Course Investment",productName:"Course Investment",productName_productCategory:"Business Education"},conditions:[]},167:{type:"productName",content:{NAME:"Business Education / Course Financial Awareness",productName:"Course Financial Awareness",productName_productCategory:"Business Education"},conditions:[]},168:{type:"productName",content:{NAME:"Business Education / Course Marketing",productName:"Course Marketing",productName_productCategory:"Business Education"},conditions:[]},169:{type:"productName",content:{NAME:"Business Education / Course Accountant",productName:"Course Accountant",productName_productCategory:"Business Education"},conditions:[]},170:{type:"productName",content:{NAME:"Business Education / Course Cafe",productName:"Course Cafe",productName_productCategory:"Business Education"},conditions:[]},171:{type:"productName",content:{NAME:"Business Education / Course State Support",productName:"Course State Support",productName_productCategory:"Business Education"},conditions:[]},172:{type:"productName",content:{NAME:"Business Education / Course Fashion Store",productName:"Course Fashion Store",productName_productCategory:"Business Education"},conditions:[]}},triggers:{109:{type:"eventeaEvent",content:{NAME:"bs_CourseSignup",eventea_eventeaEvent:"bs_CourseSignup"},conditions:[]},115:{type:"eventeaEvent",content:{NAME:"pageLoad",eventea_eventeaEvent:"pageLoad"},conditions:[]},116:{type:"eventeaEvent",content:{NAME:"emailSubmit",eventea_eventeaEvent:"emailSubmit"},conditions:[]}},variables:{101:{type:"javascriptVariable",content:{NAME:"Product Name",javascriptVariable_path:"window.tracking.state.productName"}}}})})();(function(){var q=Object.create,J=Object.defineProperty,d=Object.getOwnPropertyDescriptor,g=Object.getOwnPropertyNames,m=Object.getPrototypeOf,p=Object.prototype.hasOwnProperty,l=function(t,r){return function(){return r||t((r={exports:{}}).exports,r),r.exports}},w=function(t,r,e,n){if(r&&typeof r=="object"||typeof r=="function")for(var o=g(r),s=0,i=o.length,u;s<i;s++)u=o[s],!p.call(t,u)&&u!==e&&J(t,u,{get:function(y){return r[y]}.bind(null,u),enumerable:!(n=d(r,u))||n.enumerable});return t},v=function(t,r,e){return e=t!=null?q(m(t)):{},w(r||!t||!t.__esModule?J(e,"default",{value:t,enumerable:!0}):e,t)},E=l(function(t,r){var e=Object.defineProperty,n=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,i=function(f,_){for(var U in _)e(f,U,{get:_[U],enumerable:!0})},u=function(f,_,U,Y){if(_&&typeof _=="object"||typeof _=="function")for(var V=o(_),$=0,nt=V.length,L;$<nt;$++)L=V[$],!s.call(f,L)&&L!==U&&e(f,L,{get:function(ct){return _[ct]}.bind(null,L),enumerable:!(Y=n(_,L))||Y.enumerable});return f},y=function(f){return u(e({},"__esModule",{value:!0}),f)},b={};i(b,{ACCOUNT_DIRECTORIES:function(){return R},POLYFILLS_DIRECTORY:function(){return x},TTM_API:function(){return j},TTM_BUILD_DESCRIPTOR_PARAMETER:function(){return a},TTM_BUILD_DESCRIPTOR_SEPARATOR:function(){return M},TTM_EVENTS:function(){return H},TTM_GLOBAL:function(){return c},TTM_PUBLIC:function(){return F}}),r.exports=y(b);var F="ttm",c="_ttm",j={BUILD_ID:"buildId",LOGGER:"logger",BUNDLES:"bundles",RUNTIME_API:"$",RUN:"run"},H={INSTALLED:"ttm-installed"},M="_",a="ttmBuild",R={PUBLICATIONS:"publications",PROD_BUILDS:"builds",ENVIRONMENTS:"environments"},x="polyfills"}),I=Array.prototype.slice;function S(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function h(t){if(Array.isArray(t))return t.slice();var r={};for(var e in t)r[e]=t[e];return r}function N(t,r,e){if(t[r]===e)return t;var n=h(t);return n[r]=e,n}function D(t,r){for(var e=Object.keys(r),n=e.length,o=-1,s=t,i,u;++o<n;){u=e[o],i=r[u];var y=S(i),b=i;(y||Array.isArray(i))&&(b=u in s&&S(s[u])&&y?D(s[u],i):h(i)),s=N(s,u,b)}return s}function k(){for(var t=arguments,r=arguments.length,e=0,n=arguments[0];++e<r;)n=D(n,t[e]);return n}var T=v(E());function O(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function ot(t){if(Array.isArray(t))return t}function it(t,r){var e=t==null?null:typeof Symbol!="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(e!=null){var n=[],o=!0,s=!1,i,u;try{for(e=e.call(t);!(o=(i=e.next()).done)&&(n.push(i.value),!(r&&n.length===r));o=!0);}catch(y){s=!0,u=y}finally{try{!o&&e.return!=null&&e.return()}finally{if(s)throw u}}return n}}function K(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Z(t,r){return ot(t)||it(t,r)||tt(t,r)||K()}function tt(t,r){if(t){if(typeof t=="string")return O(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(e);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return O(t,r)}}var G=function(t,r){var e=new URL(t);return Object.entries(r||{}).forEach(function(n){var o=Z(n,2),s=o[0],i=o[1];e.searchParams.append(s,i===void 0?"":String(i))}),e.href},et=function(t){var r=t.url,e=t.searchParams,n=t.onload,o=t.onerror,s=new Image,i=G(r,e);n&&typeof n=="function"&&(s.onload=n),o&&typeof o=="function"&&(s.onerror=o),s.src=i},z=function(t){var r=t.url,e=t.searchParams,n=t.onload,o=t.onerror,s=document.getElementsByTagName("head")[0],i=document.createElement("script"),u=G(r,e);n&&typeof n=="function"&&(i.onload=n),o&&typeof o=="function"&&(i.onerror=o),i.src=u,s.appendChild(i)},Q=function(t,r){return{logger:t,addPixel:et,addScript:z,addSpecialEventListener:r.addEventListener,removeSpecialEventListener:r.removeEventListener}},W=v(E());function A(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function C(t){if(Array.isArray(t))return A(t)}function B(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function P(t){if(typeof Symbol!="undefined"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function st(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ut(t){return C(t)||P(t)||gt(t)||st()}function gt(t,r){if(t){if(typeof t=="string")return A(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(e);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return A(t,r)}}var lt=300,mt=function t(r){"use strict";var e=this;B(this,t),this.logger=r,this.listeners={},this.wrapWithTryCatch=function(n){return function(){for(var o=arguments.length,s=new Array(o),i=0;i<o;i++)s[i]=arguments[i];try{return n.apply(void 0,ut(s))}catch(u){e.logger.error(u)}}},this.dispatchAccumulated=function(){window[W.TTM_PUBLIC]=window[W.TTM_PUBLIC]||[],window[W.TTM_PUBLIC].forEach(function(n){n&&typeof n=="object"&&("type"in n&&typeof n.type=="string"||"event"in n&&typeof n.event=="string")&&e.dispatchEvent(n)}),window[W.TTM_PUBLIC].length=0},this.dispatchEvent=function(n){var o,s="type"in n?n.type:n.event;(o=e.listeners[s])===null||o===void 0||o.forEach(function(i){return i(n)})},this.addEventListener=function(n,o){e.listeners[n]||(e.listeners[n]=new Map),e.listeners[n].set(o,e.wrapWithTryCatch(o))},this.removeEventListener=function(n,o){!e.listeners[n]||e.listeners[n].delete(o)},this.start=function(){e.wrapWithTryCatch(e.dispatchAccumulated)(),setInterval(e.wrapWithTryCatch(e.dispatchAccumulated),lt)}};function at(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function pt(t){if(Array.isArray(t))return at(t)}function yt(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _t(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}function Et(t){if(typeof Symbol!="undefined"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ft(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function vt(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{},n=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(e).filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable}))),n.forEach(function(o){_t(t,o,e[o])})}return t}function Tt(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),e.push.apply(e,n)}return e}function At(t,r){return r=r!=null?r:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Tt(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t}function rt(t){return pt(t)||Et(t)||Nt(t)||ft()}function Nt(t,r){if(t){if(typeof t=="string")return at(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(e);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return at(t,r)}}var dt=function(t){return!t||typeof t!="object"?!1:"matches"in t&&typeof t.matches=="function"},bt=function(){"use strict";function t(){var e=this;yt(this,t),this.wasRun=!1,this.run=function(){if(e.wasRun){e.logger.error({message:"[TTM] Extra try to run ttm-runtime"});return}e.wasRun=!0;try{e.registerBundlesFromGlobalVariable(),e.specialEventsEmitter.start()}catch(n){e.logger.error(n)}},this.triggeredTags=[],this.onHide=function(){e.logger.data(e.triggeredTags.length,"tags-count"),e.triggeredTags.length=0},this.logger=window[T.TTM_GLOBAL][T.TTM_API.LOGGER]||{error:function(){return null},data:function(){return null},info:function(){return null}},this.specialEventsEmitter=new mt(this.logger);try{this.$=Q(this.logger,this.specialEventsEmitter),window[T.TTM_GLOBAL][T.TTM_API.RUNTIME_API]=this.$,window[T.TTM_GLOBAL][T.TTM_API.RUN]=this.run,document.visibilityState?document.addEventListener("visibilitychange",function(){document.visibilityState==="hidden"&&e.onHide()}):document.addEventListener("pagehide",function(){e.onHide()})}catch(n){window[T.TTM_GLOBAL][T.TTM_API.RUN]=function(){e.logger.error({message:"[TTM] Cant run TTM runtime - it was not initialized properly"})},this.logger.error(n)}}var r=t.prototype;return r.registerAllTags=function(){var e=this,n=Object.keys(this.bundle.triggers),o=!0,s=!1,i=void 0;try{for(var u=this,y=function(){var c=F.value,j,H=u.bundle.tags.filter(function(f){var _=f.triggerIds;return _==null?void 0:_.includes(c)}),M=u.bundle.triggers[c],a=u.bundle.runtimes.triggers[M.type];if(!a)throw new Error("There is no runtime for trigger ".concat(M.type));var R=((j=M.filterIds)===null||j===void 0?void 0:j.map(function(f){return e.bundle.filters[f]}))||[],x=function(f){try{var _=!0,U=!1,Y=void 0;try{for(var V=H[Symbol.iterator](),$;!(_=($=V.next()).done);_=!0){var nt=$.value,L,ct=((L=nt.filterIds)===null||L===void 0?void 0:L.map(function(X){return e.bundle.filters[X]}))||[],wt=e.runFilters(rt(ct).concat(rt(R)),f)&&e.runConditions(M.conditions,f);wt&&e.runTag(nt,f)}}catch(X){U=!0,Y=X}finally{try{!_&&V.return!=null&&V.return()}finally{if(U)throw Y}}}catch(X){e.logger.error(X)}};a(M.content,x)},b=n[Symbol.iterator](),F;!(o=(F=b.next()).done);o=!0)y()}catch(c){s=!0,i=c}finally{try{!o&&b.return!=null&&b.return()}finally{if(s)throw i}}},r.runFilters=function(e,n){var o=this,s=e.map(function(i){var u=o.bundle.runtimes.filters[i.type];if(!u)throw new Error("There is no filter runtime for type ".concat(i.type));return u(i.content)&&o.runConditions(i.conditions,n)});return s.every(Boolean)},r.runConditions=function(e,n){var o=this;if(!e||!e.length)return!0;var s=e.map(function(i){var u=i.conditions.map(function(y){return y.map(function(b){var F=b.variableId,c=b.value,j=b.operation,H=o.bundle.variables[F],M=o.bundle.runtimes.variables[H.type],a=M(H.content,n);switch(j){case"EQUALS":return String(a)===c;case"INCLUDES":return String(a).includes(c);case"STARTS_WITH":return String(a).startsWith(c);case"ENDS_WITH":return String(a).endsWith(c);case"CSS_SELECTOR_MATCH":{var R;return dt(a)?Boolean((R=a.matches)===null||R===void 0?void 0:R.call(a,c)):!1}case"IS_REGEXP":return new RegExp(c).test(String(a));case"IS_REGEXP_CASE_INSENSITIVE":return new RegExp(c,"i").test(String(a));case"NOT_EQUALS":return String(a)!==c;case"NOT_INCLUDES":return!String(a).includes(c);case"NOT_STARTS_WITH":return!String(a).startsWith(c);case"NOT_ENDS_WITH":return!String(a).endsWith(c);case"NOT_CSS_SELECTOR_MATCH":{var x;return dt(a)?!(!((x=a.matches)===null||x===void 0)&&x.call(a,c)):!0}case"NOT_IS_REGEXP":return!new RegExp(c).test(String(a));case"NOT_IS_REGEXP_CASE_INSENSITIVE":return!new RegExp(c,"i").test(String(a));case"LESS":return Number(a)<Number(c);case"LESS_OR_EQUALS":return Number(a)<=Number(c);case"GREATER":return Number(a)>Number(c);case"GREATER_OR_EQUALS":return Number(a)>=Number(c);default:return!1}})});return i.type==="OR"?u.some(function(y){return y.every(Boolean)}):u.every(function(y){return y.some(Boolean)})});return s.some(Boolean)},r.runTag=function(e,n){var o=this.bundle.runtimes.tags[e.type];if(!o)throw new Error("There is no tag runtime for type ".concat(e.type));!this.runConditions(e.conditions,n)||(this.logger.info("".concat(e.content.NAME," triggered")),this.triggeredTags.push(e.content.NAME),o(e.content,e,n))},r.registerBundlesFromGlobalVariable=function(){var e=window[T.TTM_GLOBAL][T.TTM_API.BUNDLES];if(!e)throw new Error("There are no bundles in window.".concat(T.TTM_GLOBAL,".").concat(T.TTM_API.BUNDLES));if(!Array.isArray(e))throw new Error("Bundles variable doesn't contain array of bundles");this.bundle=e.reduce(function(n,o){var s=rt(n.tags).concat(rt(o.tags));return At(vt({},k(n,o)),{tags:s})}),this.registerAllTags()},t}();new bt})();})();
